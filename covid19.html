<!doctype html>
<html lang="en">
  <head>
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=YOUR_GA_MEASUREMENT_ID"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
		gtag('config', 'YOUR_GA_MEASUREMENT_ID');
	</script>
    
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <style>
    
    #customers {
  font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  width: 100%;
  font-size: 24px;
  text-align: center;
}

#customers td, #customers th {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: center;
}

#customers tr:nth-child(even){background-color: #f2f2f2;}

#customers tr:hover {background-color: #ddd;}

#customers th {
  padding-top: 12px;
  padding-bottom: 12px;
  background-color: #4CAF50;
  color: white;
}
    
    
      body {
        font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;;
        font-weight: 800;
        /* background-color: blue; */
      }
    </style>
<br>
    <title>CoronaVirus (COVID-19) Live Statistics (Tracker)</title>
  </head>
  <body>
 
  
          <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- Homepage Leaderboard -->
<ins class="adsbygoogle"
style="display:inline-block;width:728px;height:90px"
data-ad-client="ca-pub-YOUR_CLIENT_ID"
data-ad-slot="YOUR_SLOT_ID"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
  
  
  
  <!–– All the User Interface -->
      <div class="container">
      
      
      
          <h1 style="color:white; background-color:DodgerBlue; padding: 8px;" align="middle">CoronaVirus (COVID-19) Live Statistics (Tracker)</h1>
          <h6 align="middle">Data updated on real-time <span id="updated"></span></h6>
          <div id="google_translate_element"></div>

<script type="text/javascript">
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en'}, 'google_translate_element');
}
</script>

<script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
		  <br><br>
          
          
          
          
          <table id="customers">
          <tr>
    <th scope="col">CONFIRMED CASES</th>
    <th scope="col">REPORTED DEATHS</th>
    <th scope="col">HEALTHY (RECOVERED)</th>
  </tr>
</table>
<br><br>
          
          
          
		<h2 align="bottom">ALL COUNTRIES STATISTICS BY CASES:</h2>
<iframe src="https://datawrapper.dwcdn.net/Xq7li/2/" style="width:100%; height:500px; margin-bottom: -32px;">
  <p>Your browser does not support iframes.</p>
</iframe><br>
        <table style="z-index: 1; position:relative;" id="breakdown" class="table table-striped table-bordered table-sm">
          <thead class="thead-dark">
            <tr>
              <th scope="col">Country</th>
              <th scope="col">Cases</th>
              <th scope="col">Deaths</th>
              <th scope="col">Healthy (Recovered)</th>
              <th scope="col">Active</th>
              <th scope="col">Updated</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
        <br><br>
        
        
        
        
		<img border="0" alt="CoronaVirus (COVID-19) Statistics Tracker" src="https://www.worldometers.info/img/flags/small/tn_us-flag.gif" align="left" width="80" height="42"/>
		<h2 align="bottom">'  DETAILS OF USA STATES:</h2>
        <iframe src="https://datawrapper.dwcdn.net/MhAYA/6/" style="width:100%; height:500px; margin-bottom: -32px;">
  <p>Your browser does not support iframes.</p>
</iframe><br>
      <table style="z-index: 1; position:relative;" id="breakdown-usa" class="table table-striped table-bordered table-sm">
        <thead class="thead-dark">
          <tr>
            <th scope="col">States</th>
            <th scope="col">Cases</th>
            <th scope="col">Deaths</th>
            <th scope="col">Healthy (Recovered)</th>
            <th scope="col">Updated</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
<br><br>




		<img border="0" alt="CoronaVirus (COVID-19) Statistics Tracker" src="https://www.worldometers.info/img/flags/small/tn_ch-flag.gif" align="left" width="80" height="42"/>
		<h2 align="bottom">'  DETAILS OF CHINA PROVINCES:</h2>
      <table id="breakdown-china" class="table table-striped table-bordered table-sm">
        <thead class="thead-dark">
          <tr>
            <th scope="col">Province</th>
            <th scope="col">Cases</th>
            <th scope="col">Deaths</th>
            <th scope="col">Healthy (Recovered)</th>
            <th scope="col">Updated</th>
          </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
<br><br>



		  <h2>CHINA vs OTHERS CASES:</h2>
          <table id="quickview" class="table table-striped table-bordered table-sm">
            <thead class="thead-dark">
              <tr>
                <th scope="col">Date</th>
                <th scope="col">China</th>
                <th scope="col">Outside</th>
                <th scope="col">Total</th>
                <th scope="col">Difference</th>
              </tr>
            </thead>
            <tbody>
            </tbody>
          </table>
      <br><br>








      </div>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://momentjs.com/downloads/moment.js"></script>
    <script>
    
    
    

        // All Countries
        fetch( "https://services1.arcgis.com/0MSEUqKaxRlEPj5g/arcgis/rest/services/ncov_cases/FeatureServer/1/query?f=json&where=1%3D1&returnGeometry=false&outFields=*&orderByFields=Country_Region%20asc%2CProvince_State%20asc&resultOffset=0&resultRecordCount=1000&cacheHint=true" )
        .then( r => r.json() )
        .then( r => {
            if( r ) {
                let data = r.features.map( x => x.attributes ).map( x => ({
                    date: x.Last_Update,
                    formattedDate: moment( x.Last_Update + 18000000 ).format( "lll" ),
                    country: x.Country_Region || "",
                    cases: x.Confirmed || 0,
                    deaths: x.Deaths || 0,
                    recovered: x.Recovered || 0,
                    active: x.Active || 0,
                }));
                console.log( data );
                // data.pop();
                let maxCases = Math.max( ...data.map( x => x.cases ) );
                
                grouped = [];

data.forEach(function (a) {
    var key = ['country'].map(function (k) { return a[k]; }).join('|');
    if (!this[key]) {
        this[key] = { country: a.country, cases: 0, deaths: 0, recovered: 0, active: 0, formattedDate: a.formattedDate};
        grouped.push(this[key]);
    }
    if(a.formattedDate > this[key].formattedDate) this[key].formattedDate = a.formattedDate;
    this[key].cases += a.cases;
    this[key].deaths += a.deaths;
    this[key].recovered += a.recovered;
    this[key].active += a.active;
}, Object.create(null));
                
                let totalCases = 0;
                let totalDeaths = 0;
                let totalRecovered = 0;
                
                grouped.forEach( (x,i) => {
                    $( "#breakdown tr:last" ).after( `
                      <tr>
                        <td>${x.country}</td>
                        <td class="table-${getLessIsBetterHighlight( x.cases / maxCases )}">${x.cases}</td>
                        <td class="table-${getLessIsBetterHighlight( x.deaths / x.cases )}">${x.deaths} <small>(${ ( x.deaths / x.cases * 100 ).toFixed( 2 ) }%)</small></td>
                        <td class="table-${getMoreIsBetterHighlight( x.recovered / x.cases )}">${x.recovered} <small>(${ ( x.recovered / x.cases * 100 ).toFixed( 2 ) }%)</small></td>
                        <td class="table-${getLessIsBetterHighlight( x.active / x.cases )}">${x.active} <small>(${ ( x.active / x.cases * 100 ).toFixed( 2 ) }%)</small></td>
                        <td><small>${x.formattedDate}</small></td>
                      </tr>` );
                      
                      totalCases += x.cases;
                      totalDeaths += x.deaths;
                      totalRecovered += x.recovered;
                });
                
                $( "#customers tr:last" ).after( `
                      <tr>
                        <td>${totalCases}</td>
                        <td>${totalDeaths}</td>
                        <td>${totalRecovered}</td>
                      </tr>` );
                
				
				sortTable(1,"breakdown");
            }
        });
        
        
        

        // China in Detail
        fetch( "https://services1.arcgis.com/0MSEUqKaxRlEPj5g/arcgis/rest/services/ncov_cases/FeatureServer/1/query?f=json&where=1%3D1&returnGeometry=false&outFields=*&orderByFields=Country_Region%20asc%2CProvince_State%20asc&resultOffset=0&resultRecordCount=1000&cacheHint=true" )
        .then( r => r.json() )
        .then( r => {
            if( r ) {
                let data = r.features.map( x => x.attributes ).filter( x => x.Country_Region === "Mainland China" || x.Country_Region === "China" ).map( x => ({
                    date: x.Last_Update,
                    formattedDate: moment( x.Last_Update + 18000000 ).format( "lll" ),
                    province: x.Province_State || "",
                    country: x.Country_Region || "",
                    cases: x.Confirmed || 0,
                    deaths: x.Deaths || 0,
                    recovered: x.Recovered || 0,
                }));
                console.log( data );
                
                // Max after Hubei (Wuhan)
                let maxCases = Math.max( ...data.filter( x => x.province !== "Hubei" ).map( x => x.cases ) );
                console.log( maxCases );
                data.forEach( (x,i) => {
                    $( "#breakdown-china tr:last" ).after( `
                      <tr>
                        <td class="table-${x.province === "Hubei" ? "secondary" : "default"}">${x.province}</td>
                        <td class="table-${getLessIsBetterHighlight( x.cases / maxCases )}">${x.cases}</td>
                        <td class="table-${getLessIsBetterHighlight( x.deaths / x.cases )}">${x.deaths} <small>(${ ( x.deaths / x.cases * 100 ).toFixed( 2 ) }%)</small></td>
                        <td class="table-${getMoreIsBetterHighlight( x.recovered / x.cases )}">${x.recovered} <small>(${ ( x.recovered / x.cases * 100 ).toFixed( 2 ) }%)</small></td>
                        <td><small>${x.formattedDate}</small></td>
                      </tr>` );
                });
                
               sortTable(1,"breakdown-china");
            }
        });
		
        
        
        
        
        
		// USA in Detail
        fetch( "https://services1.arcgis.com/0MSEUqKaxRlEPj5g/arcgis/rest/services/ncov_cases/FeatureServer/1/query?f=json&where=1%3D1&returnGeometry=false&outFields=*&orderByFields=Country_Region%20asc%2CProvince_State%20asc&resultOffset=0&resultRecordCount=1000&cacheHint=true" )
        .then( r => r.json() )
        .then( r => {
            if( r ) {
                let data = r.features.map( x => x.attributes ).filter( x => x.Country_Region === "US" || x.Country_Region === "USA" ).map( x => ({
                    date: x.Last_Update,
                    formattedDate: moment( x.Last_Update + 18000000 ).format( "lll" ),
                    state: x.Province_State || "",
                    country: x.Country_Region || "",
                    cases: x.Confirmed || 0,
                    deaths: x.Deaths || 0,
                    recovered: x.Recovered || 0,
                }));
                console.log( data );

                // Max after New York
                let maxCases = Math.max( ...data.filter( x => x.state !== "New York" ).map( x => x.cases ) );
                console.log( maxCases );
                data.forEach( (x,i) => {
                    $( "#breakdown-usa tr:last" ).after( `
                      <tr>
                        <td class="table-${x.state === "New York" ? "secondary" : "default"}">${x.state}</td>
                        <td class="table-${getLessIsBetterHighlight( x.cases / maxCases )}">${x.cases}</td>
                        <td class="table-${getLessIsBetterHighlight( x.deaths / x.cases )}">${x.deaths} <small>(${ ( x.deaths / x.cases * 100 ).toFixed( 2 ) }%)</small></td>
                        <td class="table-${getMoreIsBetterHighlight( x.recovered / x.cases )}">${x.recovered} <small>(${ ( x.recovered / x.cases * 100 ).toFixed( 2 ) }%)</small></td>
                        <td><small>${x.formattedDate}</small></td>
                      </tr>` );
                });
                sortTable(1, "breakdown-usa");
            }
        });
        
        
        
                // China vs Others
        fetch( `https://services1.arcgis.com/0MSEUqKaxRlEPj5g/arcgis/rest/services/cases_time_v3/FeatureServer/0/query?f=json&where=1%3D1&returnGeometry=false&spatialRel=esriSpatialRelIntersects&outFields=*&orderByFields=Report_Date_String%20asc&resultOffset=0&resultRecordCount=3000&cacheHint=true` )
        .then( r => r.json() )
        .then( r => {
            if( r ) {
                let data = r.features.map( x => x.attributes ).map( x => ({
                    date: x.Report_Date,
                    formattedDate: moment( x.Report_Date ).format( "ll" ),
                    china: x.Mainland_China,
                    other: x.Other_Locations,
                    total: x.Total_Confirmed
                }));
                console.log( data );
                $( "#updated" ).text( `(Updated ${data[ data.length - 1 ].formattedDate})` );

                data.forEach( (x,i) => {
                    let prevChina = ( i > 0 ? data[ i - 1 ].china : x.china );
                    let prevOther = ( i > 0 ? data[ i - 1 ].other : x.other );
                    let prevTotal = ( i > 0 ? data[ i - 1 ].total : x.total );
                    if( x.total ) {
                        $( "#quickview tr:last" ).after( `
                          <tr>
                            <th scope="row">${x.formattedDate}</th>
                            <td class="table-${getLessIsBetterHighlight( ( x.china - prevChina ) / prevChina )}">${x.china} <small>(+${ ( ( x.china - prevChina ) / prevChina * 100 ).toFixed( 2 ) }%)</small></td>
                            <td class="table-${getLessIsBetterHighlight( ( x.other - prevOther ) / prevOther )}">${x.other} <small>(+${ ( ( x.other - prevOther ) / prevOther * 100 ).toFixed( 2 ) }%)</small></td>
                            <td class="table-${getLessIsBetterHighlight( ( x.total - prevTotal ) / prevTotal )}">${x.total} <small>(+${ ( ( x.total - prevTotal ) / prevTotal * 100 ).toFixed( 2 ) }%)</small></td>
                            <td>${x.total - prevTotal}</small></td>
                          </tr>` );
                    }
                });
            }
        });
        
        
        
        function myCreateFunction() {
  var table = document.getElementById("customers");
  var row = table.insertRow(0);
  var cell1 = row.insertCell(0);
  var cell2 = row.insertCell(1);
  var cell3 = row.insertCell(2);
  cell1.innerHTML = "NEW CELL1";
  cell2.innerHTML = "NEW CELL2";
  cell2.innerHTML = "NEW CELL3";
}
        
        
        
        
        // LessIsBetterHighlight & MoreIsBetterHighlight Logic

        function getLessIsBetterHighlight( x ) {
            if( x <= 0 ) {
                return "secondary";
            }
            else if( x < 0.25 ) {
                return "info";
            }
            else if( x < 0.5 ) {
                return "warning";
            }
            else {
                return "danger";
            }
        }

        function getMoreIsBetterHighlight( x ) {
            if( x <= 0 ) {
                return "danger";
            }
            else if( x < 0.25 ) {
                return "warning";
            }
            else if( x < 0.5 ) {
                return "info";
            }
            else {
                return "success";
            }
        }
        
        
        
		
		// Sort First Table by Cases
		function sortTable(num, tableName) {
  var table, rows, switching, i, x, y, shouldSwitch;
  table = document.getElementById(tableName);
  switching = true;
  /*Make a loop that will continue until
  no switching has been done:*/
  while (switching) {
    //start by saying: no switching is done:
    switching = false;
    rows = table.rows;
    /*Loop through all table rows (except the
    first, which contains table headers):*/
    for (i = 1; i < (rows.length - 1); i++) {
      //start by saying there should be no switching:
      shouldSwitch = false;
      /*Get the two elements you want to compare,
      one from current row and one from the next:*/
      x = rows[i].getElementsByTagName("TD")[num];
      y = rows[i + 1].getElementsByTagName("TD")[num];
      //check if the two rows should switch place:
      if (Number(x.innerHTML) < Number(y.innerHTML)) {
        //if so, mark as a switch and break the loop:
        shouldSwitch = true;
        break;
      }
    }
    if (shouldSwitch) {
      /*If a switch has been marked, make the switch
      and mark that a switch has been done:*/
      rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
      switching = true;
    }
  }
}
    </script>
  </body>
</html>
